<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
  <div th:replace="components/layout/header :: head(~{::title}, ~{}, ~{})">
    <title th:text="${global.siteInfo.websiteName}">技术派</title>
  </div>

  <link href="/css/views/user.css" rel="stylesheet" />

  <body id="body">
    <!-- 导航栏 -->
    <div th:replace="components/layout/navbar :: navbar"></div>

    <!-- 正文内容 -->
    <div class="user">
      <!-- <img src="/img/mine-bg.png" alt="" /> -->
      <div class="user-bg">
        <div class="user-head">
          <img th:src="${vo.userHome.photo}" class="user-head-img" />
          <div class="user-head-title-wrap">
            <div class="user-head-title-name">
              用户名用户名用户名用户名用户名用户名用户名用户名用户名用户名用户名用户名
            </div>
            <div class="user-head-title-classify">
              <div class="user-head-title-classify-item">
                <span>获赞</span>
                <span>0</span>
              </div>
              <div class="user-head-cell"></div>
              <div class="user-head-title-classify-item">
                <span>粉丝</span>
                <span>0</span>
              </div>
              <div class="user-head-cell"></div>
              <div class="user-head-title-classify-item">
                <span>关注</span>
                <span>0</span>
              </div>
              <div class="user-head-cell"></div>
              <div class="user-head-title-classify-item">
                <span>看过我</span>
                <span>0</span>
              </div>
            </div>
          </div>
          <div class="user-head-footer">
            <div class="user-text">
              点击添加简介，让大家认识你
              <span
                class="user-text-icon"
                data-toggle="modal"
                data-target="#saveModel"
              >
                <svg
                  t="1670060220524"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="4260"
                  width="20"
                  height="20"
                >
                  <path
                    d="M912.5 797.8H183.4c-15.1 0-27.4-12.3-27.4-27.4 0-15.1 12.3-27.4 27.4-27.4h729.1c15.1 0 27.4 12.3 27.4 27.4 0.1 15.1-12.3 27.4-27.4 27.4zM494.9 588.5l-38-32.2 281.9-332c7.8-9.2 8.3-22 1.2-28.1l-56.3-47.9c-3.9-3.4-8.9-3.6-12.1-3.1-5.6 0.8-11.3 4-15.4 8.9L374.4 486l-38-32.2 281.9-332c12.1-14.3 28.7-23.5 46.6-25.9 18.8-2.5 37.1 2.5 51.2 14.5l56.3 47.9c28.2 24 30.2 68.1 4.5 98.3l-282 331.9z"
                    fill="#828282"
                    p-id="4261"
                  ></path>
                  <path
                    d="M341.2 656.6c-10.5 0-20.4-3.6-28.4-10.3-13-11-18.5-28.5-14.4-45.7l38.9-147.5 48.2 12.8-36.1 136.9 124.9-60.5 21.7 44.9-134.9 65.2c-6.6 2.8-13.3 4.2-19.9 4.2z"
                    fill="#828282"
                    p-id="4262"
                  ></path>
                  <path
                    d="M339.418 456.257l30.058-35.348 152.436 129.625-30.058 35.348zM589.299 191.09l30.447-35.804 129.2 109.867-30.446 35.805z"
                    fill="#828282"
                    p-id="4263"
                  ></path>
                </svg>
              </span>
            </div>
            <div class="user-edit">
              <span>个人资料完善度：70%</span>
              <span data-toggle="modal" data-target="#saveModel">去编辑 ></span>
            </div>
          </div>
        </div>
        <div class="user-bg-mask"></div>
      </div>
      <div class="user-wrap">
        <div class="user-content">
          <!-- 主要内容 -->
          <div class="user-body">
            <!-- 选择标签列表 -->
            <div
              th:replace="views/user/navbar/home-bar :: select_tag(${vo.homeSelectTags}, ${vo.userHome.userId})"
            ></div>

            <!-- 标签内容列表 -->
            <div class="user-article-wrap">
              <!-- 文章列表 -->
              <div
                id="articleList"
                th:if="${vo.homeSelectType == 'article' || vo.homeSelectType == 'read' || vo.homeSelectType == 'collection'}"
              >
                <div th:replace="views/user/articles/index">文章列表</div>
              </div>

              <!-- 粉丝关注列表-->
              <a th:if="${vo.homeSelectType == 'follow'}">
                <div
                  th:replace="views/user/navbar/follow-bar :: select_tag(${vo.followSelectTags}, ${vo.userHome.userId})"
                ></div>
                <div th:replace="views/user/follows/index">关注列表</div>
                <div
                  th:if="${#lists.isEmpty(vo.followList.list)}"
                  id="followList"
                >
                  <div style="color: gray">列表为空~</div>
                </div>
              </a>
            </div>
          </div>
          <!-- 左侧内容 -->
          <div class="user-left">
            <!-- <div
            th:replace="views/user/info/index :: user_info(${vo.userHome})"
          ></div> -->
            <div
              th:replace="views/user/achievement/index :: user_achievement(${vo.userHome})"
            ></div>
            <div
              th:replace="views/user/history/index :: user_process(${vo.userHome})"
            ></div>
          </div>
        </div>
      </div>
      <div th:replace="components/layout/footer :: footer"></div>

      <!--  个人用户修改弹窗  -->
      <div th:replace="views/user/info/edit"></div>
    </div>

    <script th:inline="javascript">
      // 切换关注按钮
      $(".attention-btn").click(function (e) {
          e.stopPropagation()
          if ($(this)[0].innerText === "+关注") {
              $(this)[0].innerText = "已关注"
          } else {
              $(this)[0].innerText = "+关注"
          }
      })

      // 自动下滑翻页
      const selectType = [[${vo.homeSelectType}]].toLowerCase()
      const userId = [[${vo.userHome.userId}]]
      if (selectType === 'follow') {
          const params = {
              "userId": userId,
              "followSelectType": [[${vo.followSelectType}]].toLowerCase(),
              "page": 2
          }
          loadMore("#followList", "/user/api/followList", params, "followList");
      } else {
          const params = {
              "userId": userId,
              "homeSelectType": selectType,
              "page": 2
          }
          loadMore("#articleList", "/user/api/articleList", params, "articleList");
      }
    </script>
  </body>
</html>
